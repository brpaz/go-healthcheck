<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# healthcheck

```go
import "github.com/brpaz/go-healthcheck/v2"
```

Package healthcheck provides a library for creating health check endpoints. It includes various built\-in checks and new ones can be added easily. It tooks inspiration from https://inadarei.github.io/rfc-healthcheck/ for the response structure. Example Usage:

package main

import "net/http" import "github.com/brpaz/go\-healthcheck/v2" import "github.com/brpaz/go\-healthcheck/v2/checks/mockcheck"

```
func main() {
    mycheck := mockcheck.New(
		mockcheck.WithName("my-check"),
	)
	hc := healthcheck.New(
		healthcheck.WithServiceID("my-service"),
		healthcheck.WithDescription("My Service"),
		healthcheck.WithVersion("1.0.0"),
		healthcheck.WithReleaseID("1.0.0-SNAPSHOT"),
		healthcheck.WithCheck(mycheck),
	)

	http.HandleFunc("/health", healthcheck.HealthHandler(hc))
	http.ListenAndServe(":8080", nil)
}
```

## Index

- [func HealthHandler\(healthchecker \*HealthCheck\) http.HandlerFunc](<#HealthHandler>)
- [type CheckRunResult](<#CheckRunResult>)
- [type HealthCheck](<#HealthCheck>)
  - [func New\(opts ...Option\) \*HealthCheck](<#New>)
  - [func \(h \*HealthCheck\) AddCheck\(check checks.Check\)](<#HealthCheck.AddCheck>)
  - [func \(h \*HealthCheck\) Execute\(ctx context.Context\) CheckRunResult](<#HealthCheck.Execute>)
  - [func \(h \*HealthCheck\) GetChecks\(\) \[\]checks.Check](<#HealthCheck.GetChecks>)
- [type HealthChecker](<#HealthChecker>)
- [type HealthHttpResponse](<#HealthHttpResponse>)
- [type Option](<#Option>)
  - [func WithCheck\(check checks.Check\) Option](<#WithCheck>)
  - [func WithDescription\(desc string\) Option](<#WithDescription>)
  - [func WithReleaseID\(id string\) Option](<#WithReleaseID>)
  - [func WithServiceID\(id string\) Option](<#WithServiceID>)
  - [func WithVersion\(version string\) Option](<#WithVersion>)


<a name="HealthHandler"></a>
## func [HealthHandler](<https://github.com/brpaz/go-healthcheck/blob/master/handler.go#L35>)

```go
func HealthHandler(healthchecker *HealthCheck) http.HandlerFunc
```

HealthHandler provides an HTTP handler that can be used to serve the health check endpoint.

<a name="CheckRunResult"></a>
## type [CheckRunResult](<https://github.com/brpaz/go-healthcheck/blob/master/healthcheck.go#L110-L113>)

CheckRunResult aggregates the result of running a group of checks.

```go
type CheckRunResult struct {
    Status checks.Status
    Checks map[string][]checks.Result
}
```

<a name="HealthCheck"></a>
## type [HealthCheck](<https://github.com/brpaz/go-healthcheck/blob/master/healthcheck.go#L40-L46>)

HealthCheck aggregates multiple healthchecks and provides metadata about the service.

```go
type HealthCheck struct {
    ServiceID   string
    Description string
    Version     string
    ReleaseID   string
    Checks      []checks.Check
}
```

<a name="New"></a>
### func [New](<https://github.com/brpaz/go-healthcheck/blob/master/healthcheck.go#L87>)

```go
func New(opts ...Option) *HealthCheck
```

New creates a new HealthChecker instance the provided options.

<a name="HealthCheck.AddCheck"></a>
### func \(\*HealthCheck\) [AddCheck](<https://github.com/brpaz/go-healthcheck/blob/master/healthcheck.go#L100>)

```go
func (h *HealthCheck) AddCheck(check checks.Check)
```

AddCheck adds a new check to the HealthCheck instance.

<a name="HealthCheck.Execute"></a>
### func \(\*HealthCheck\) [Execute](<https://github.com/brpaz/go-healthcheck/blob/master/healthcheck.go#L121>)

```go
func (h *HealthCheck) Execute(ctx context.Context) CheckRunResult
```

Execute runs all registered healthchecks and returns an aggregated result, composed of the overall status and the individual results of each check. The final status is determined as follows: \- If any check returns StatusFail, the overall status is StatusFail. \- If no checks return StatusFail but at least one returns StatusWarn, the overall status is StatusWarn. \- If all checks return StatusPass, the overall status is StatusPass.

<a name="HealthCheck.GetChecks"></a>
### func \(\*HealthCheck\) [GetChecks](<https://github.com/brpaz/go-healthcheck/blob/master/healthcheck.go#L105>)

```go
func (h *HealthCheck) GetChecks() []checks.Check
```

GetChecks returns the registered checks.

<a name="HealthChecker"></a>
## type [HealthChecker](<https://github.com/brpaz/go-healthcheck/blob/master/healthcheck.go#L35-L37>)



```go
type HealthChecker interface {
    Execute(ctx context.Context) CheckRunResult
}
```

<a name="HealthHttpResponse"></a>
## type [HealthHttpResponse](<https://github.com/brpaz/go-healthcheck/blob/master/handler.go#L12-L20>)

HealthHttpResponse represents the structure of the health check HTTP response.

```go
type HealthHttpResponse struct {
    ServiceID   string                     `json:"serviceId,omitempty"`
    Description string                     `json:"description,omitempty"`
    Version     string                     `json:"version,omitempty"`
    ReleaseID   string                     `json:"releaseId,omitempty"`
    Output      string                     `json:"output,omitempty"`
    Status      checks.Status              `json:"status"`
    Checks      map[string][]checks.Result `json:"checks"`
}
```

<a name="Option"></a>
## type [Option](<https://github.com/brpaz/go-healthcheck/blob/master/healthcheck.go#L49>)

Option is a functional option for configuring HealthCheck.

```go
type Option func(*HealthCheck)
```

<a name="WithCheck"></a>
### func [WithCheck](<https://github.com/brpaz/go-healthcheck/blob/master/healthcheck.go#L80>)

```go
func WithCheck(check checks.Check) Option
```

WithCheck registers a check in the HealthCheck.

<a name="WithDescription"></a>
### func [WithDescription](<https://github.com/brpaz/go-healthcheck/blob/master/healthcheck.go#L59>)

```go
func WithDescription(desc string) Option
```

WithDescription sets the description.

<a name="WithReleaseID"></a>
### func [WithReleaseID](<https://github.com/brpaz/go-healthcheck/blob/master/healthcheck.go#L73>)

```go
func WithReleaseID(id string) Option
```

WithReleaseID sets the release ID.

<a name="WithServiceID"></a>
### func [WithServiceID](<https://github.com/brpaz/go-healthcheck/blob/master/healthcheck.go#L52>)

```go
func WithServiceID(id string) Option
```

WithServiceID sets the service ID.

<a name="WithVersion"></a>
### func [WithVersion](<https://github.com/brpaz/go-healthcheck/blob/master/healthcheck.go#L66>)

```go
func WithVersion(version string) Option
```

WithVersion sets the version.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
