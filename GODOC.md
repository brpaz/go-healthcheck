<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# healthcheck

```go
import "github.com/brpaz/go-healthcheck"
```

Package healthcheck provides a library for creating health check endpoints. It includes various built\-in checks and new ones can be added easily. It tooks inspiration from https://inadarei.github.io/rfc-healthcheck/ for the response structure. Example Usage:

package main

import "net/http" import "github.com/brpaz/go\-healthcheck" import "github.com/brpaz/go\-healthcheck/pkg/checks/mockcheck"

```
func main() {
    mycheck := mockcheck.New(
		mockcheck.WithName("my-check"),
	)
	hc := healthcheck.New(
		healthcheck.WithServiceID("my-service"),
		healthcheck.WithDescription("My Service"),
		healthcheck.WithVersion("1.0.0"),
		healthcheck.WithReleaseID("1.0.0-SNAPSHOT"),
		healthcheck.WithCheck(mycheck),
	)

	http.HandleFunc("/health", healthcheck.Handler(hc))
	http.ListenAndServe(":8080", nil)
}
```

## Index

- [func Handler\(hc \*HealthCheck\) http.HandlerFunc](<#Handler>)
- [type HealthCheck](<#HealthCheck>)
  - [func New\(opts ...Option\) \*HealthCheck](<#New>)
  - [func \(h \*HealthCheck\) Execute\(ctx context.Context\) Response](<#HealthCheck.Execute>)
- [type Option](<#Option>)
  - [func WithCheck\(check checks.Check\) Option](<#WithCheck>)
  - [func WithDescription\(desc string\) Option](<#WithDescription>)
  - [func WithReleaseID\(id string\) Option](<#WithReleaseID>)
  - [func WithServiceID\(id string\) Option](<#WithServiceID>)
  - [func WithVersion\(version string\) Option](<#WithVersion>)
- [type Response](<#Response>)


<a name="Handler"></a>
## func [Handler](<https://github.com/brpaz/go-healthcheck/blob/master/health.go#L161>)

```go
func Handler(hc *HealthCheck) http.HandlerFunc
```

Handler provides an HTTP handler that can be used to serve the health check endpoint.

<a name="HealthCheck"></a>
## type [HealthCheck](<https://github.com/brpaz/go-healthcheck/blob/master/health.go#L38-L44>)

HealthCheck represents a collection of health checks for a service.

```go
type HealthCheck struct {
    ServiceID   string
    Description string
    Version     string
    ReleaseID   string
    Checks      []checks.Check
}
```

<a name="New"></a>
### func [New](<https://github.com/brpaz/go-healthcheck/blob/master/health.go#L99>)

```go
func New(opts ...Option) *HealthCheck
```

New creates a new HealthCheck instance with optional configuration.

<a name="HealthCheck.Execute"></a>
### func \(\*HealthCheck\) [Execute](<https://github.com/brpaz/go-healthcheck/blob/master/health.go#L113>)

```go
func (h *HealthCheck) Execute(ctx context.Context) Response
```

Execute runs all checks in parallel and returns the result. The global health check status is calculated based on the statuses of all checks

<a name="Option"></a>
## type [Option](<https://github.com/brpaz/go-healthcheck/blob/master/health.go#L61>)

Option is a functional option for configuring HealthCheck.

```go
type Option func(*HealthCheck)
```

<a name="WithCheck"></a>
### func [WithCheck](<https://github.com/brpaz/go-healthcheck/blob/master/health.go#L92>)

```go
func WithCheck(check checks.Check) Option
```

WithCheck registers a check in the HealthCheck.

<a name="WithDescription"></a>
### func [WithDescription](<https://github.com/brpaz/go-healthcheck/blob/master/health.go#L71>)

```go
func WithDescription(desc string) Option
```

WithDescription sets the description.

<a name="WithReleaseID"></a>
### func [WithReleaseID](<https://github.com/brpaz/go-healthcheck/blob/master/health.go#L85>)

```go
func WithReleaseID(id string) Option
```

WithReleaseID sets the release ID.

<a name="WithServiceID"></a>
### func [WithServiceID](<https://github.com/brpaz/go-healthcheck/blob/master/health.go#L64>)

```go
func WithServiceID(id string) Option
```

WithServiceID sets the service ID.

<a name="WithVersion"></a>
### func [WithVersion](<https://github.com/brpaz/go-healthcheck/blob/master/health.go#L78>)

```go
func WithVersion(version string) Option
```

WithVersion sets the version.

<a name="Response"></a>
## type [Response](<https://github.com/brpaz/go-healthcheck/blob/master/health.go#L50-L58>)

Response represents the health check response structure. Health Check Response Format for HTTP APIs uses JSON format described in RFC 8259 and has the media type "application/health\+json". Its content consists of a single mandatory root field \("status"\) and several optional fields: See https://tools.ietf.org/id/draft-inadarei-api-health-check-05.html#section-3

```go
type Response struct {
    ServiceID   string                     `json:"service_id,omitempty"`
    Description string                     `json:"description,omitempty"`
    Version     string                     `json:"version,omitempty"`
    ReleaseID   string                     `json:"release_id,omitempty"`
    Output      string                     `json:"output,omitempty"`
    Status      checks.Status              `json:"status"`
    Checks      map[string][]checks.Result `json:"checks"`
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
