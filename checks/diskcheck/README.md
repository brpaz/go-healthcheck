<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# diskcheck

```go
import "github.com/brpaz/go-healthcheck/v2/checks/diskcheck"
```

Package diskcheck provides disk space monitoring health checks. It monitors disk usage and alerts when thresholds are exceeded.

## Index

- [Constants](<#constants>)
- [type Check](<#Check>)
  - [func New\(opts ...Option\) \*Check](<#New>)
  - [func \(c \*Check\) GetDiskInfo\(\) \(\[\]\*DiskInfo, error\)](<#Check.GetDiskInfo>)
  - [func \(c \*Check\) GetName\(\) string](<#Check.GetName>)
  - [func \(c \*Check\) Run\(ctx context.Context\) checks.Result](<#Check.Run>)
- [type DefaultFileSystemStater](<#DefaultFileSystemStater>)
  - [func \(d \*DefaultFileSystemStater\) Statfs\(path string\) \(\*DiskInfo, error\)](<#DefaultFileSystemStater.Statfs>)
- [type DiskInfo](<#DiskInfo>)
- [type FileSystemStater](<#FileSystemStater>)
- [type Option](<#Option>)
  - [func WithFailThreshold\(threshold float64\) Option](<#WithFailThreshold>)
  - [func WithFileSystemStater\(stater FileSystemStater\) Option](<#WithFileSystemStater>)
  - [func WithName\(name string\) Option](<#WithName>)
  - [func WithPath\(path string\) Option](<#WithPath>)
  - [func WithWarnThreshold\(threshold float64\) Option](<#WithWarnThreshold>)


## Constants

<a name="Name"></a>

```go
const (
    Name = "disk-check"
)
```

<a name="Check"></a>
## type [Check](<https://github.com/brpaz/go-healthcheck/blob/master/checks/diskcheck/check.go#L28-L34>)

Check represents a disk space health check that monitors disk usage.

```go
type Check struct {
    // contains filtered or unexported fields
}
```

<a name="New"></a>
### func [New](<https://github.com/brpaz/go-healthcheck/blob/master/checks/diskcheck/check.go#L75>)

```go
func New(opts ...Option) *Check
```

New creates a new Disk Check instance with optional configuration.

<a name="Check.GetDiskInfo"></a>
### func \(\*Check\) [GetDiskInfo](<https://github.com/brpaz/go-healthcheck/blob/master/checks/diskcheck/check.go#L130>)

```go
func (c *Check) GetDiskInfo() ([]*DiskInfo, error)
```

GetDiskInfo returns disk information for all monitored paths

<a name="Check.GetName"></a>
### func \(\*Check\) [GetName](<https://github.com/brpaz/go-healthcheck/blob/master/checks/diskcheck/check.go#L92>)

```go
func (c *Check) GetName() string
```

GetName returns the name of the check.

<a name="Check.Run"></a>
### func \(\*Check\) [Run](<https://github.com/brpaz/go-healthcheck/blob/master/checks/diskcheck/check.go#L99>)

```go
func (c *Check) Run(ctx context.Context) checks.Result
```

Run executes the disk space health check and returns results for each monitored path. Note: This implementation temporarily returns only the first path check for RFC compliance. TODO: Split into separate checks per path.

<a name="DefaultFileSystemStater"></a>
## type [DefaultFileSystemStater](<https://github.com/brpaz/go-healthcheck/blob/master/checks/diskcheck/reader.go#L14>)

DefaultFileSystemStater implements FileSystemStater using syscall.Statfs

```go
type DefaultFileSystemStater struct{}
```

<a name="DefaultFileSystemStater.Statfs"></a>
### func \(\*DefaultFileSystemStater\) [Statfs](<https://github.com/brpaz/go-healthcheck/blob/master/checks/diskcheck/reader.go#L16>)

```go
func (d *DefaultFileSystemStater) Statfs(path string) (*DiskInfo, error)
```



<a name="DiskInfo"></a>
## type [DiskInfo](<https://github.com/brpaz/go-healthcheck/blob/master/checks/diskcheck/check.go#L18-L25>)

DiskInfo represents disk usage information

```go
type DiskInfo struct {
    Path     string
    Total    uint64
    Free     uint64
    Used     uint64
    UsedPct  float64
    AvailPct float64
}
```

<a name="FileSystemStater"></a>
## type [FileSystemStater](<https://github.com/brpaz/go-healthcheck/blob/master/checks/diskcheck/reader.go#L9-L11>)

FileSystemStater defines the interface for getting filesystem statistics

```go
type FileSystemStater interface {
    Statfs(path string) (*DiskInfo, error)
}
```

<a name="Option"></a>
## type [Option](<https://github.com/brpaz/go-healthcheck/blob/master/checks/diskcheck/check.go#L37>)

Option is a functional option for configuring Check.

```go
type Option func(*Check)
```

<a name="WithFailThreshold"></a>
### func [WithFailThreshold](<https://github.com/brpaz/go-healthcheck/blob/master/checks/diskcheck/check.go#L61>)

```go
func WithFailThreshold(threshold float64) Option
```

WithFailThreshold sets the disk usage percentage that triggers a failure \(default: 90%\).

<a name="WithFileSystemStater"></a>
### func [WithFileSystemStater](<https://github.com/brpaz/go-healthcheck/blob/master/checks/diskcheck/check.go#L68>)

```go
func WithFileSystemStater(stater FileSystemStater) Option
```

WithFileSystemStater sets a custom filesystem stater \(useful for testing\).

<a name="WithName"></a>
### func [WithName](<https://github.com/brpaz/go-healthcheck/blob/master/checks/diskcheck/check.go#L40>)

```go
func WithName(name string) Option
```

WithName sets the name of the check.

<a name="WithPath"></a>
### func [WithPath](<https://github.com/brpaz/go-healthcheck/blob/master/checks/diskcheck/check.go#L47>)

```go
func WithPath(path string) Option
```

WithPath sets the paths to monitor, replacing any existing paths.

<a name="WithWarnThreshold"></a>
### func [WithWarnThreshold](<https://github.com/brpaz/go-healthcheck/blob/master/checks/diskcheck/check.go#L54>)

```go
func WithWarnThreshold(threshold float64) Option
```

WithWarnThreshold sets the disk usage percentage that triggers a warning \(default: 80%\).

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
